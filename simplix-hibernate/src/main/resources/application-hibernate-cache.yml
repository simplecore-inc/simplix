# Hibernate Cache Module Configuration
# This configuration is automatically loaded when using the hibernate-cache module

spring:
  jpa:
    properties:
      hibernate:
        # Second Level Cache Configuration
        cache:
          use_second_level_cache: true
          use_query_cache: true
          region:
            factory_class: jcache
          # Missing cache strategy: create, fail, or ignore
          javax.cache.missing_cache_strategy: create

        # Statistics for monitoring cache performance
        generate_statistics: false  # Enable in dev/test, disable in production

        # Cache provider specific settings
        javax:
          cache:
            provider: org.ehcache.jsr107.EhcacheCachingProvider
            uri: classpath:ehcache.xml

        # Query cache settings
        query:
          startup_check: false

        # Batch fetching optimization
        default_batch_fetch_size: 16

        # JDBC batch size for bulk operations
        jdbc:
          batch_size: 25
          batch_versioned_data: true

# SimpliX Hibernate Cache Module Configuration
simplix:
  hibernate:
    cache:
      # Disable the module entirely (default: false)
      disabled: false

      # Enable query cache auto-eviction when entity cache is evicted
      query-cache-auto-eviction: true

      # Packages to scan for @Cache entities (optional)
      # scan-packages:
      #   - "com.example.domain.entity"

# Logging configuration for cache debugging
logging:
  level:
    org.hibernate.cache: WARN
    org.hibernate.stat: WARN
    org.ehcache: WARN
    dev.simplecore.simplix.hibernate.cache: INFO

---
# Development profile
spring:
  config:
    activate:
      on-profile: dev
  jpa:
    properties:
      hibernate:
        generate_statistics: true

logging:
  level:
    org.hibernate.cache: DEBUG
    org.hibernate.stat: DEBUG
    dev.simplecore.simplix.hibernate.cache: DEBUG

---
# Test profile
spring:
  config:
    activate:
      on-profile: test
  jpa:
    properties:
      hibernate:
        generate_statistics: true

simplix:
  hibernate:
    cache:
      disabled: false

---
# Production profile
spring:
  config:
    activate:
      on-profile: prod

logging:
  level:
    org.hibernate.cache: ERROR
    org.hibernate.stat: ERROR
    dev.simplecore.simplix.hibernate.cache: WARN
