package dev.simplecore.simplix.demo.web.common.user.dto;

import com.fasterxml.jackson.annotation.JsonInclude;
import dev.simplecore.searchable.core.annotation.SearchableField;
import dev.simplecore.simplix.demo.domain.common.user.entity.UserOrganization;
import dev.simplecore.simplix.demo.domain.common.user.enums.OrganizationType;
import io.swagger.v3.oas.annotations.media.Schema;
import lombok.*;
import org.springframework.format.annotation.DateTimeFormat;

import jakarta.validation.constraints.NotBlank;
import java.time.OffsetDateTime;
import java.util.ArrayList;
import java.util.List;
import java.util.Set;

import static dev.simplecore.searchable.core.condition.operator.SearchOperator.*;

/**
 * This file was auto-generated by SimpliX Generator
 * 
 * Generator Version: 0.0.1
 * Generated At: 2025-02-05T14:39:17.973+09:00
 * Generated By: thkwag<thkwag@gmail.com>
 */
public class UserOrganizationDTOs {

    //----------------------------------
    // Search
    //----------------------------------

    @Getter
    @Setter
    public static class UserOrganizationSearchDTO {
        
        @Schema(description = "Organization ID")
        @SearchableField(operators = {EQUALS})
        private String id;
        
        @Schema(description = "Organization Name")
        @SearchableField(operators = {CONTAINS, EQUALS}, sortable = true)
        private String name;
        
        @Schema(description = "Parent")
        @SearchableField(entityField = "parent.id", operators = {EQUALS})
        private String parent;
        
        @Schema(description = "Organization Description")
        @SearchableField(operators = {EQUALS, CONTAINS})
        private String description;
        
        @Schema(description = "Order")
        @SearchableField(operators = {EQUALS, GREATER_THAN, LESS_THAN})
        private Integer itemOrder;
        
        @Schema(description = "Children")
        @SearchableField(entityField = "children.id", operators = {EQUALS})
        private String children;
        
        @Schema(description = "등록일시")
        @SearchableField(operators = {GREATER_THAN, LESS_THAN, BETWEEN}, sortable = true)
        private OffsetDateTime createdAt;
    }

    //----------------------------------
    // Create, Update
    //----------------------------------

    @Data
    public static class UserOrganizationCreateDTO {
        
        @Schema(description = "Organization Name")
        private String name;
        
        @Schema(description = "Organization Type")
        private OrganizationType orgType;
        
        @Schema(description = "Parent")
        private String parent;
        
        @Schema(description = "Organization Description")
        private String description;
        
        @Schema(description = "Order")
        private Integer itemOrder;
        
        @Schema(description = "Children")
        private Set<String> children;
        
    }

    @Data
    public static class UserOrganizationUpdateDTO {
        
        @Schema(description = "UserOrganization ID")
        @NotBlank(message = "ID is a required input value")
        private String id;
        
        @Schema(description = "Organization Name")
        private String name;
        
        @Schema(description = "Organization Type")
        private OrganizationType orgType;
        
        @Schema(description = "Parent")
        private String parent;
        
        @Schema(description = "Organization Description")
        private String description;
        
        @Schema(description = "Order")
        private Integer itemOrder;
        
        @Schema(description = "Children")
        private Set<String> children;
        
    }

    @Data
    public static class UserOrganizationBatchUpdateDTO {
        @Schema(description = "UserOrganization ID List")
        private Set<String> ids;
        
        @Schema(description = "Organization Type")
        private OrganizationType orgType;
        
        @Schema(description = "Parent")
        private String parent;
        
        @Schema(description = "Organization Description")
        private String description;
        
        @Schema(description = "Order")
        private Integer itemOrder;
        
        @Schema(description = "Children")
        private Set<String> children;
        
    }

    //----------------------------------
    // Projection
    //----------------------------------

    @Data
    public static class UserOrganizationDetailDTO {
        
        @Schema(description = "Organization ID")
        private String id;
        
        @Schema(description = "Organization Name")
        private String name;
        
        @Schema(description = "Organization Type")
        private OrganizationType orgType;
        
        @Schema(description = "Parent")
        private UserOrganization parent;
        
        @Schema(description = "Organization Description")
        private String description;
        
        @Schema(description = "Order")
        private Integer itemOrder;
        
        @Schema(description = "Children")
        private Set<UserOrganization> children;
        
        @Schema(description = "등록자")
        private String createdBy;

        @Schema(description = "등록일시")
        @DateTimeFormat(pattern = "yyyy-MM-dd HH:mm")
        private OffsetDateTime createdAt;

        @Schema(description = "수정자")
        private String updatedBy;

        @Schema(description = "수정일시")
        @DateTimeFormat(pattern = "yyyy-MM-dd HH:mm")
        private OffsetDateTime updatedAt;
    }

    @Data
    public static class UserOrganizationListDTO {
        
        @Schema(description = "Organization ID")
        private String id;
        
        @Schema(description = "Organization Name")
        private String name;
        
        @Schema(description = "Organization Type")
        private OrganizationType orgType;
        
        @Schema(description = "Parent")
        private UserOrganization parent;
        
        @Schema(description = "Organization Description")
        private String description;
        
        @Schema(description = "Order")
        private Integer itemOrder;
        
        @Schema(description = "Children")
        private Set<UserOrganization> children;
        
        @Schema(description = "등록일시")
        @DateTimeFormat(pattern = "yyyy-MM-dd HH:mm")
        private OffsetDateTime createdAt;
    }

    //----------------------------------
    // MyBatis DTO
    //----------------------------------

    @Data
    @Builder
    @NoArgsConstructor
    @AllArgsConstructor
    @JsonInclude(JsonInclude.Include.NON_NULL)
    public static class UserOrganizationTreeDTO {
        private String id;
        private String name;
        private OrganizationType orgType;
        private String parentId;
        private String description;
        private Integer itemOrder;
        private OffsetDateTime createdAt;
        private String path;
        private Integer level;

        @Builder.Default
        private List<UserOrganizationTreeDTO> children = new ArrayList<>();
    }

    
    @Data
    @Builder
    @NoArgsConstructor
    @AllArgsConstructor
    public static class ParentOrgDTO {
        private String id;
        private String name;
        private OrganizationType orgType;
        private String description;
    }

    @Data
    @Builder
    @NoArgsConstructor
    @AllArgsConstructor
    public static class UserOrganizationMyBatisDTO {
        private String id;
        private String name;
        private OrganizationType orgType;
        private String parentId;
        private String description;
        private Integer itemOrder;
        private OffsetDateTime createdAt;
        private String path;
        private Integer level;
        private ParentOrgDTO parent;

        public UserOrganizationTreeDTO toTreeDTO() {
            return UserOrganizationTreeDTO.builder()
                    .id(id)
                    .name(name)
                    .orgType(orgType)
                    .parentId(parentId)
                    .description(description)
                    .itemOrder(itemOrder)
                    .createdAt(createdAt)
                    .path(path)
                    .level(level)
                    .children(new ArrayList<>())
                    .build();
        }
    }
} 